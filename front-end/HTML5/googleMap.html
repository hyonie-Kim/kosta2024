<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>구글지도</title>
    <!-- 구글맵 API -->
    <script type="text/javascript"
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB41DRUbKWJHPxaFjMAwdrzWzbVKartNGg&callback=initMap&v=weekly"> </script>

<body>
    <script>
        var markerIcon = new google.maps.MarkerImage("marker.png")
        function MyPosition() {
            if (navigator.geolocation) { // null포인터 인지 물어봄. 그러면 수행하면 X
                navigator.geolocation.getCurrentPosition(CurPosition, ErrorCallback)
            }
        }

        function CurPosition(position) {
            // 성공했을때 호출하는 함수
            var lat = position.coords.latitude; //위도
            var lng = position.coords.longitude; // 경도

            document.getElementById("result").innerHTML = "위도 : " + lat + " 경도 :" + lng;

            var latlng = new google.maps.LatLng(lat, lng);
            var options = {
                zoom: 15,
                center: latlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            }

            // map 이름의 엘리먼트, 생성한 옵션을 넣음
            // 구글맵을 출력하는 객체를 생성
            var map = new google.maps.Map(document.getElementById("map"), options);

            var marker = new google.maps.Marker({
                map: map,
                icon: markerIcon,
                title: "현재위치",
                position: latlng
            })
        }

        function ErrorCallback(err) {
            switch (err.code) {
                case err.PERMISSION_DENIED:
                    document.getElementById("result").innerHTML = "현재 위치 정보에 대한 권한이 없습니다.";
                    break;
                case err.POSITION_UNAVAILABLE:
                    document.getElementById("result").innerHTML = "현재 위치 정보를 구할 수 없습니다.";
                    break;
                case err.TIMEOUT:
                    document.getElementById("result").innerHTML = "시간 제한을 초과했습니다.";
                    break;
            }
        }

    </script>
    <button onclick="MyPosition()">나의 현재 위치</button>
    <p></p>
    <div id="result"></div>
    <div id="map" style="width: 500px; height: 500px;"></div>


</body>

</html>