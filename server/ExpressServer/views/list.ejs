<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ListHTML</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <%-include('menu.html')%>
        <!-- DBë¡œ ë¶€í„° ì½ì€ ë°ì´í„°ë¥¼ ì„œë²„ë¡œë¶€í„° ë°›ì•„ì„œ í™”ë©´ì— ë„£ì–´ì¤€ë‹¤. -->

        <p></p>

        <div class="container my-3"><input type="text">
            <button>ê²€ìƒ‰í•˜ê¸°</button>
        </div>
        <table class="table table-hover table-striped text-center container mt-4" style="border: 1px solid">
            <thead>
                <tr>
                    <th>ì œëª©</th>
                    <th>ì‘ì„±ì¼</th>
                    <th>ì‚­ì œğŸ—‘</th>
                </tr>
            </thead>
            <tbody>
                <% for(let i=0; i<data.length; i ++){%>
                    <tr>
                        <td>
                            <a href="/content/<%= data[i]._id %>">
                                <%= data[i].title %>
                            </a>

                        </td>
                        <td>
                            <%= data[i].date %>
                        </td>
                        <td><Button class="delete btn btn-outline-danger" data-id="<%=data[i]._id%>">ì‚­ì œ</Button></td>
                    </tr>
                    <% } %>
            </tbody>
        </table>

        <div class="container my-3">
            <button class="btn btn-primary enter" style="float: right;">ê¸€ì“°ê¸°</button>
        </div>

        <script src="https://code.jquery.com/jquery-1.12.4.min.js">
        </script>
        <script>
            $('.delete').click(function (e) {
                let sid = e.target.dataset.id;
                console.log(sid);
                $.ajax({
                    //type(get,post,put,delete), url(/delete), data(id:10)
                    type: 'post',
                    url: '/delete',
                    data: { _id: sid } // ì‹¤ì œ idë¥¼ ë„£ì–´ì¤˜ì•¼í•¨ 

                }).done(function (result) {
                    // ì‘ë‹µì— ì„±ê³µ
                    location.reload(); // í˜„ì¬ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
                }).fail(function (xhr, textStatus, errorThrown) {
                    // ì‘ë‹µì— ì‹¤íŒ¨
                    console.log('ê²Œì‹œë¬¼ ì‚­ì œ ì‹¤íŒ¨');
                    // xhr - request ê°ì²´ì˜ ì›ë³¸
                    // textStatus - ì—ëŸ¬ ê³ ì •ê°’ì„ ê°–ëŠ” ë¬¸ìì—´
                    // errorThrown - ì‹¤ì œ ì˜¤ë¥˜ì˜ ì›ì¸ì„ ì•Œë ¤ì¤Œ
                    console.log(xhr, textStatus, errorThrown);
                })
            })


            $('.enter').click(function (e) {
                location.href = '/enter';
            })

            $('.sbtn').click(function () {
                let inputValue = $('.sword').val()
                location.href = '\\search?value' + inputValue


            })

        </script>


        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>
</body>

</html>